
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../utils/">
      
      
        <link rel="next" href="../security/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.15">
    
    
      
        <title>Spoolers - Sqooler</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-documentation-of-spoolers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Sqooler" class="md-header__button md-logo" aria-label="Sqooler" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sqooler
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Spoolers
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/alqor-ug/sqooler" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Sqooler" class="md-nav__button md-logo" aria-label="Sqooler" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Sqooler
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/alqor-ug/sqooler" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../description/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General description
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../schemes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schemes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Spoolers
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Spoolers
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers" class="md-nav__link">
    <span class="md-ellipsis">
      spoolers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler" class="md-nav__link">
    <span class="md-ellipsis">
      BaseSpooler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseSpooler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.display_name" class="md-nav__link">
    <span class="md-ellipsis">
      display_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_dimension" class="md-nav__link">
    <span class="md-ellipsis">
      check_dimension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_experiment" class="md-nav__link">
    <span class="md-ellipsis">
      check_experiment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_instructions" class="md-nav__link">
    <span class="md-ellipsis">
      check_instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_json_dict" class="md-nav__link">
    <span class="md-ellipsis">
      check_json_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.get_configuration" class="md-nav__link">
    <span class="md-ellipsis">
      get_configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.get_exp_input_dict" class="md-nav__link">
    <span class="md-ellipsis">
      get_exp_input_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.get_private_jwk" class="md-nav__link">
    <span class="md-ellipsis">
      get_private_jwk
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler" class="md-nav__link">
    <span class="md-ellipsis">
      LabscriptSpooler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LabscriptSpooler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler.add_job" class="md-nav__link">
    <span class="md-ellipsis">
      add_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler.gen_circuit" class="md-nav__link">
    <span class="md-ellipsis">
      gen_circuit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.Spooler" class="md-nav__link">
    <span class="md-ellipsis">
      Spooler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Spooler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.Spooler.gen_circuit" class="md-nav__link">
    <span class="md-ellipsis">
      gen_circuit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.Spooler.add_job" class="md-nav__link">
    <span class="md-ellipsis">
      add_job
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.create_memory_data" class="md-nav__link">
    <span class="md-ellipsis">
      create_memory_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.gate_dict_from_list" class="md-nav__link">
    <span class="md-ellipsis">
      gate_dict_from_list
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.get_file_queue" class="md-nav__link">
    <span class="md-ellipsis">
      get_file_queue
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Storage Providers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Storage Providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage_providers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../local/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dropbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dropbox
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../idea_payment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ideas on Payments
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers" class="md-nav__link">
    <span class="md-ellipsis">
      spoolers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler" class="md-nav__link">
    <span class="md-ellipsis">
      BaseSpooler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseSpooler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.display_name" class="md-nav__link">
    <span class="md-ellipsis">
      display_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_dimension" class="md-nav__link">
    <span class="md-ellipsis">
      check_dimension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_experiment" class="md-nav__link">
    <span class="md-ellipsis">
      check_experiment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_instructions" class="md-nav__link">
    <span class="md-ellipsis">
      check_instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.check_json_dict" class="md-nav__link">
    <span class="md-ellipsis">
      check_json_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.get_configuration" class="md-nav__link">
    <span class="md-ellipsis">
      get_configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.get_exp_input_dict" class="md-nav__link">
    <span class="md-ellipsis">
      get_exp_input_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.BaseSpooler.get_private_jwk" class="md-nav__link">
    <span class="md-ellipsis">
      get_private_jwk
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler" class="md-nav__link">
    <span class="md-ellipsis">
      LabscriptSpooler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LabscriptSpooler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler.add_job" class="md-nav__link">
    <span class="md-ellipsis">
      add_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.LabscriptSpooler.gen_circuit" class="md-nav__link">
    <span class="md-ellipsis">
      gen_circuit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.Spooler" class="md-nav__link">
    <span class="md-ellipsis">
      Spooler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Spooler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.Spooler.gen_circuit" class="md-nav__link">
    <span class="md-ellipsis">
      gen_circuit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.Spooler.add_job" class="md-nav__link">
    <span class="md-ellipsis">
      add_job
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.create_memory_data" class="md-nav__link">
    <span class="md-ellipsis">
      create_memory_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.gate_dict_from_list" class="md-nav__link">
    <span class="md-ellipsis">
      gate_dict_from_list
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.sqooler.spoolers.get_file_queue" class="md-nav__link">
    <span class="md-ellipsis">
      get_file_queue
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="api-documentation-of-spoolers">API documentation of spoolers</h1>


<div class="doc doc-object doc-module">



<a id="src.sqooler.spoolers"></a>
  <div class="doc doc-contents first">
  
      <p>This module contains the code for the Spooler classes and its helpers. So it mainly meant to be deployed
on the back-end side for people that would like to perform calculations and work through the job queue.</p>
<p>The main class is the <code>Spooler</code> class. It is the class that is used for the simulators. 
The <code>LabscriptSpooler</code> class is a specialized version of the <code>Spooler</code> class that allows us to execute 
jobs in labscript directly.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="src.sqooler.spoolers.BaseSpooler" class="doc doc-heading">
          <code>BaseSpooler</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="abc.ABC">ABC</span></code></p>

  
      <p>Abstract base class for spoolers. They are the main logic of the back-end.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.ins_schema_dict">ins_schema_dict</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary the contains all the allowed instructions for this spooler.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.device_config">device_config</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary that some main config params for the experiment.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.n_wires">n_wires</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>maximum number of wires for the spooler</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.n_max_shots">n_max_shots</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the maximum number of shots for the spooler</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.version">version</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the version of the backend</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.cold_atom_type">cold_atom_type</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the type of cold atom that is used in the experiment</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.n_max_experiments">n_max_experiments</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the maximum number of experiments that can be executed</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.wire_order">wire_order</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the order of the wires</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.num_species">num_species</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the number of atomic species in the experiment</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.operational">operational</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>is the backend ready for access by remote users ?</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.BaseSpooler.sign">sign</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sign the results of the job</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BaseSpooler</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for spoolers. They are the main logic of the back-end.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        ins_schema_dict : A dictionary the contains all the allowed instructions for this spooler.</span>
<span class="sd">        device_config: A dictionary that some main config params for the experiment.</span>
<span class="sd">        n_wires: maximum number of wires for the spooler</span>
<span class="sd">        n_max_shots: the maximum number of shots for the spooler</span>
<span class="sd">        version: the version of the backend</span>
<span class="sd">        cold_atom_type: the type of cold atom that is used in the experiment</span>
<span class="sd">        n_max_experiments: the maximum number of experiments that can be executed</span>
<span class="sd">        wire_order: the order of the wires</span>
<span class="sd">        num_species: the number of atomic species in the experiment</span>
<span class="sd">        operational: is the backend ready for access by remote users ?</span>
<span class="sd">        sign: sign the results of the job</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ins_schema_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">device_config</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
        <span class="n">n_wires</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">n_max_shots</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
        <span class="n">cold_atom_type</span><span class="p">:</span> <span class="n">ColdAtomStr</span> <span class="o">=</span> <span class="s2">&quot;spin&quot;</span><span class="p">,</span>
        <span class="n">n_max_experiments</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
        <span class="n">wire_order</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;interleaved&quot;</span><span class="p">,</span>
        <span class="n">num_species</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">operational</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">sign</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The constructor of the class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span> <span class="o">=</span> <span class="n">ins_schema_dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_config</span> <span class="o">=</span> <span class="n">device_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_max_shots</span> <span class="o">=</span> <span class="n">n_max_shots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_wires</span> <span class="o">=</span> <span class="n">n_wires</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cold_atom_type</span> <span class="o">=</span> <span class="n">cold_atom_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span> <span class="o">=</span> <span class="n">n_max_experiments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wire_order</span> <span class="o">=</span> <span class="n">wire_order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_species</span> <span class="o">=</span> <span class="n">num_species</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operational</span> <span class="o">=</span> <span class="n">operational</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">=</span> <span class="n">sign</span>

    <span class="k">def</span> <span class="nf">check_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exper_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check the validity of the experiment. It checks if the the instructions are valid</span>
<span class="sd">        based on the device configuration of the spooler.</span>

<span class="sd">        Args:</span>
<span class="sd">            exper_dict: The dictionary that contains the logic and should</span>
<span class="sd">                be verified.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The error message</span>
<span class="sd">            bool: Is the experiment ok ?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_config</span><span class="p">(</span><span class="o">**</span><span class="n">exper_dict</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">),</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BackendConfigSchemaIn</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends back the configuration dictionary of the spooler.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration dictionary of the spooler.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gate_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">ins_obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;is_gate&quot;</span> <span class="ow">in</span> <span class="n">ins_obj</span><span class="o">.</span><span class="n">model_fields</span><span class="p">:</span>
                <span class="n">gate_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ins_obj</span><span class="o">.</span><span class="n">config_dict</span><span class="p">())</span>
        <span class="n">backend_config_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="s2">&quot;cold_atom_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cold_atom_type</span><span class="p">,</span>
            <span class="s2">&quot;gates&quot;</span><span class="p">:</span> <span class="n">gate_list</span><span class="p">,</span>
            <span class="s2">&quot;max_experiments&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span><span class="p">,</span>
            <span class="s2">&quot;max_shots&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_max_shots</span><span class="p">,</span>
            <span class="s2">&quot;simulator&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;supported_instructions&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
            <span class="s2">&quot;num_wires&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_wires</span><span class="p">,</span>
            <span class="s2">&quot;wire_order&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">wire_order</span><span class="p">,</span>
            <span class="s2">&quot;num_species&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_species</span><span class="p">,</span>
            <span class="s2">&quot;operational&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">operational</span><span class="p">,</span>
            <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">BackendConfigSchemaIn</span><span class="p">(</span><span class="o">**</span><span class="n">backend_config_dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check_instructions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ins_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check all the instruction to make sure that they are valid and part</span>
<span class="sd">        of the allowed instructions.</span>

<span class="sd">        Args:</span>
<span class="sd">            ins_list: The list of instructions that should be checked.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The error message</span>
<span class="sd">            bool: Are the instructions ok ?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># first check that we actually have any instructions safed in the ins_schema_dict</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;No instructions allowed. Add instructions to the spooler.&quot;</span>
            <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span>

        <span class="k">for</span> <span class="n">ins</span> <span class="ow">in</span> <span class="n">ins_list</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">gate_instr</span> <span class="o">=</span> <span class="n">gate_dict_from_list</span><span class="p">(</span><span class="n">ins</span><span class="p">)</span>
                <span class="c1"># see if the instruction is part of the allowed instructions</span>
                <span class="k">if</span> <span class="n">gate_instr</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">err_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Instruction </span><span class="si">{</span><span class="n">gate_instr</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> not allowed.&quot;</span>
                    <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">return</span> <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span>

                <span class="c1"># now verify that the parameters are ok</span>
                <span class="n">gate_dict</span> <span class="o">=</span> <span class="n">gate_instr</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="p">[</span><span class="n">gate_instr</span><span class="o">.</span><span class="n">name</span><span class="p">](</span><span class="o">**</span><span class="n">gate_dict</span><span class="p">)</span>
                <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Error in instruction &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">exp_ok</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span>

    <span class="k">def</span> <span class="nf">check_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make sure that the Hilbert space dimension is not too large.</span>

<span class="sd">        It can be implemented in the class that inherits, but it is not necessary.</span>
<span class="sd">        So this is only a placeholder.</span>

<span class="sd">        Args:</span>
<span class="sd">            json_dict: the dictonary with the instructions</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the error message</span>
<span class="sd">            bool: is the dimension ok ?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=W0613</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">check_json_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExperimentalInputDict</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the json file has the appropiate syntax.</span>

<span class="sd">        Args:</span>
<span class="sd">            json_dict (dict): the dictonary that we will test.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the error message</span>
<span class="sd">            bool: is the expression having the appropiate syntax ?</span>
<span class="sd">            dict: the cleaned dictionary with proper typing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;No instructions received.&quot;</span>
        <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">clean_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExperimentalInputDict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="p">:</span>
            <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Wrong experiment name or too many experiments&quot;</span>
            <span class="c1"># test the name of the experiment</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;experiment_&quot;</span><span class="p">):</span>
                <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Experiment name must start with experiment_&quot;</span>
                <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">expr</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Experiment name must end with a number&quot;</span>
                <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">[</span><span class="mi">11</span><span class="p">:])</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span><span class="p">:</span>
                <span class="n">err_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Experiment number too high. Must be less than </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
            <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="c1"># test the structure of the experiment</span>
            <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_experiment</span><span class="p">(</span><span class="n">json_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">exp_ok</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="c1"># time to check the structure of the instructions</span>
            <span class="n">ins_list</span> <span class="o">=</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="s2">&quot;instructions&quot;</span><span class="p">]</span>
            <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_instructions</span><span class="p">(</span><span class="n">ins_list</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">exp_ok</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">clean_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exp_input_dict</span><span class="p">(</span><span class="n">json_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">err_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">),</span> <span class="n">exp_ok</span><span class="p">,</span> <span class="n">clean_dict</span>

    <span class="k">def</span> <span class="nf">_prep_job</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">ResultDict</span><span class="p">,</span> <span class="n">StatusMsgDict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare the job for execution. It checks the json file and prepares the</span>
<span class="sd">        result and status dictionaries.</span>

<span class="sd">        Args:</span>
<span class="sd">            json_dict: The dictionary with the instructions.</span>
<span class="sd">            job_id: The id of the job.</span>

<span class="sd">        Returns:</span>
<span class="sd">            result_dict: The dictionary with the results of the job.</span>
<span class="sd">            status_msg_dict: The status dictionary of the job.</span>
<span class="sd">            clean_dict: The cleaned dictionary with the instructions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">status_msg_dict</span> <span class="o">=</span> <span class="n">get_init_status</span><span class="p">()</span>
        <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">job_id</span> <span class="o">=</span> <span class="n">job_id</span>

        <span class="n">result_dict</span> <span class="o">=</span> <span class="n">ResultDict</span><span class="p">(</span>
            <span class="n">display_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
            <span class="n">backend_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="s2">&quot;INITIALIZING&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">result_dict</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># this simply helps pylint to understand the code</span>

        <span class="c1"># check that the json_dict is indeed well behaved</span>
        <span class="n">err_msg</span><span class="p">,</span> <span class="n">json_is_fine</span><span class="p">,</span> <span class="n">clean_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_json_dict</span><span class="p">(</span><span class="n">json_dict</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">json_is_fine</span><span class="p">:</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="s2">&quot;; Failed json sanity check. File will be deleted. Error message : &quot;</span>
                <span class="o">+</span> <span class="n">err_msg</span>
            <span class="p">)</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="s2">&quot;; Failed json sanity check. File will be deleted. Error message : &quot;</span>
                <span class="o">+</span> <span class="n">err_msg</span>
            <span class="p">)</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Error in json compatibility test.&quot;</span><span class="p">,</span>
                <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span><span class="p">},</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span><span class="p">,</span> <span class="n">clean_dict</span>

        <span class="c1"># now we need to check the dimensionality of the experiment</span>
        <span class="n">dim_err_msg</span><span class="p">,</span> <span class="n">dim_ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_dimension</span><span class="p">(</span><span class="n">json_dict</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">dim_ok</span><span class="p">:</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="s2">&quot;; Failed dimensionality test. Too many atoms. File will be deleted. Error message : &quot;</span>
                <span class="o">+</span> <span class="n">dim_err_msg</span>
            <span class="p">)</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="s2">&quot;; Failed dimensionality test. Too many atoms. File will be deleted. Error message :  &quot;</span>
                <span class="o">+</span> <span class="n">dim_err_msg</span>
            <span class="p">)</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Error in dimensionality test.&quot;</span><span class="p">,</span>
                <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span><span class="p">},</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span><span class="p">,</span> <span class="n">clean_dict</span>

        <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span><span class="p">,</span> <span class="n">clean_dict</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The name of the spooler.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span>

    <span class="nd">@display_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># Check if the provided value is a string</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;display_name must be a string&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_exp_input_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExperimentalInputDict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transforms the dictionary into an ExperimentalInputDict object.</span>

<span class="sd">        Args:</span>
<span class="sd">            json_dict: The dictionary that should be transformed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A ExperimentalInputDict object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">raw_ins_list</span> <span class="o">=</span> <span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;instructions&quot;</span><span class="p">]</span>
        <span class="n">ins_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">gate_dict_from_list</span><span class="p">(</span><span class="n">instr</span><span class="p">)</span> <span class="k">for</span> <span class="n">instr</span> <span class="ow">in</span> <span class="n">raw_ins_list</span><span class="p">]</span>
        <span class="n">exp_info</span> <span class="o">=</span> <span class="n">ExperimentalInputDict</span><span class="p">(</span>
            <span class="n">instructions</span><span class="o">=</span><span class="n">ins_list</span><span class="p">,</span>
            <span class="n">shots</span><span class="o">=</span><span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;shots&quot;</span><span class="p">],</span>
            <span class="n">wire_order</span><span class="o">=</span><span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;wire_order&quot;</span><span class="p">],</span>
            <span class="n">num_wires</span><span class="o">=</span><span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;num_wires&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">exp_info</span>

    <span class="k">def</span> <span class="nf">get_private_jwk</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JWK</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the private JWK for the spooler.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The private JWK for the spooler.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">private_jwk_str</span> <span class="o">=</span> <span class="n">config</span><span class="p">(</span><span class="s2">&quot;PRIVATE_JWK_STR&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jwk_from_config_str</span><span class="p">(</span><span class="n">private_jwk_str</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="src.sqooler.spoolers.BaseSpooler.display_name" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">display_name</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>The name of the spooler.</p>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">ins_schema_dict</span><span class="p">,</span> <span class="n">device_config</span><span class="p">,</span> <span class="n">n_wires</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">n_max_shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="n">cold_atom_type</span><span class="o">=</span><span class="s1">&#39;spin&#39;</span><span class="p">,</span> <span class="n">n_max_experiments</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">wire_order</span><span class="o">=</span><span class="s1">&#39;interleaved&#39;</span><span class="p">,</span> <span class="n">num_species</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">operational</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sign</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The constructor of the class.</p>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ins_schema_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">device_config</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
    <span class="n">n_wires</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">n_max_shots</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
    <span class="n">cold_atom_type</span><span class="p">:</span> <span class="n">ColdAtomStr</span> <span class="o">=</span> <span class="s2">&quot;spin&quot;</span><span class="p">,</span>
    <span class="n">n_max_experiments</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
    <span class="n">wire_order</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;interleaved&quot;</span><span class="p">,</span>
    <span class="n">num_species</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">operational</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">sign</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The constructor of the class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span> <span class="o">=</span> <span class="n">ins_schema_dict</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">device_config</span> <span class="o">=</span> <span class="n">device_config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_max_shots</span> <span class="o">=</span> <span class="n">n_max_shots</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_wires</span> <span class="o">=</span> <span class="n">n_wires</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cold_atom_type</span> <span class="o">=</span> <span class="n">cold_atom_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span> <span class="o">=</span> <span class="n">n_max_experiments</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wire_order</span> <span class="o">=</span> <span class="n">wire_order</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">num_species</span> <span class="o">=</span> <span class="n">num_species</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">operational</span> <span class="o">=</span> <span class="n">operational</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">=</span> <span class="n">sign</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.check_dimension" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check_dimension</span><span class="p">(</span><span class="n">json_dict</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Make sure that the Hilbert space dimension is not too large.</p>
<p>It can be implemented in the class that inherits, but it is not necessary.
So this is only a placeholder.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>json_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the dictonary with the instructions</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>str</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the error message</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>bool</code></td>          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>is the dimension ok ?</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make sure that the Hilbert space dimension is not too large.</span>

<span class="sd">    It can be implemented in the class that inherits, but it is not necessary.</span>
<span class="sd">    So this is only a placeholder.</span>

<span class="sd">    Args:</span>
<span class="sd">        json_dict: the dictonary with the instructions</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the error message</span>
<span class="sd">        bool: is the dimension ok ?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=W0613</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.check_experiment" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check_experiment</span><span class="p">(</span><span class="n">exper_dict</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check the validity of the experiment. It checks if the the instructions are valid
based on the device configuration of the spooler.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>exper_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dictionary that contains the logic and should
be verified.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>str</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The error message</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>bool</code></td>          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Is the experiment ok ?</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exper_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check the validity of the experiment. It checks if the the instructions are valid</span>
<span class="sd">    based on the device configuration of the spooler.</span>

<span class="sd">    Args:</span>
<span class="sd">        exper_dict: The dictionary that contains the logic and should</span>
<span class="sd">            be verified.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The error message</span>
<span class="sd">        bool: Is the experiment ok ?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_config</span><span class="p">(</span><span class="o">**</span><span class="n">exper_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">),</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.check_instructions" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check_instructions</span><span class="p">(</span><span class="n">ins_list</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check all the instruction to make sure that they are valid and part
of the allowed instructions.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ins_list</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The list of instructions that should be checked.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>str</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The error message</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>bool</code></td>          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Are the instructions ok ?</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_instructions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ins_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check all the instruction to make sure that they are valid and part</span>
<span class="sd">    of the allowed instructions.</span>

<span class="sd">    Args:</span>
<span class="sd">        ins_list: The list of instructions that should be checked.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The error message</span>
<span class="sd">        bool: Are the instructions ok ?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># first check that we actually have any instructions safed in the ins_schema_dict</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;No instructions allowed. Add instructions to the spooler.&quot;</span>
        <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span>

    <span class="k">for</span> <span class="n">ins</span> <span class="ow">in</span> <span class="n">ins_list</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gate_instr</span> <span class="o">=</span> <span class="n">gate_dict_from_list</span><span class="p">(</span><span class="n">ins</span><span class="p">)</span>
            <span class="c1"># see if the instruction is part of the allowed instructions</span>
            <span class="k">if</span> <span class="n">gate_instr</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">err_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Instruction </span><span class="si">{</span><span class="n">gate_instr</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> not allowed.&quot;</span>
                <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">return</span> <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span>

            <span class="c1"># now verify that the parameters are ok</span>
            <span class="n">gate_dict</span> <span class="o">=</span> <span class="n">gate_instr</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="p">[</span><span class="n">gate_instr</span><span class="o">.</span><span class="n">name</span><span class="p">](</span><span class="o">**</span><span class="n">gate_dict</span><span class="p">)</span>
            <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Error in instruction &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exp_ok</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.check_json_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check_json_dict</span><span class="p">(</span><span class="n">json_dict</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if the json file has the appropiate syntax.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>json_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the dictonary that we will test.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>str</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the error message</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>bool</code></td>          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>is the expression having the appropiate syntax ?</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>dict</code></td>          <td>
                <code>dict[str, <a class="autorefs autorefs-internal" title="src.sqooler.schemes.ExperimentalInputDict" href="../schemes/#src.sqooler.schemes.ExperimentalInputDict">ExperimentalInputDict</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the cleaned dictionary with proper typing</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_json_dict</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExperimentalInputDict</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the json file has the appropiate syntax.</span>

<span class="sd">    Args:</span>
<span class="sd">        json_dict (dict): the dictonary that we will test.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the error message</span>
<span class="sd">        bool: is the expression having the appropiate syntax ?</span>
<span class="sd">        dict: the cleaned dictionary with proper typing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;No instructions received.&quot;</span>
    <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">clean_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExperimentalInputDict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="p">:</span>
        <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Wrong experiment name or too many experiments&quot;</span>
        <span class="c1"># test the name of the experiment</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;experiment_&quot;</span><span class="p">):</span>
            <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Experiment name must start with experiment_&quot;</span>
            <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expr</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
            <span class="n">err_code</span> <span class="o">=</span> <span class="s2">&quot;Experiment name must end with a number&quot;</span>
            <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">[</span><span class="mi">11</span><span class="p">:])</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span><span class="p">:</span>
            <span class="n">err_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Experiment number too high. Must be less than </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>
        <span class="n">exp_ok</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># test the structure of the experiment</span>
        <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_experiment</span><span class="p">(</span><span class="n">json_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exp_ok</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="c1"># time to check the structure of the instructions</span>
        <span class="n">ins_list</span> <span class="o">=</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="s2">&quot;instructions&quot;</span><span class="p">]</span>
        <span class="n">err_code</span><span class="p">,</span> <span class="n">exp_ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_instructions</span><span class="p">(</span><span class="n">ins_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exp_ok</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">clean_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exp_input_dict</span><span class="p">(</span><span class="n">json_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">err_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">),</span> <span class="n">exp_ok</span><span class="p">,</span> <span class="n">clean_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.get_configuration" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_configuration</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Sends back the configuration dictionary of the spooler.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.BackendConfigSchemaIn" href="../schemes/#src.sqooler.schemes.BackendConfigSchemaIn">BackendConfigSchemaIn</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The configuration dictionary of the spooler.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BackendConfigSchemaIn</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends back the configuration dictionary of the spooler.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The configuration dictionary of the spooler.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gate_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">ins_obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="s2">&quot;is_gate&quot;</span> <span class="ow">in</span> <span class="n">ins_obj</span><span class="o">.</span><span class="n">model_fields</span><span class="p">:</span>
            <span class="n">gate_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ins_obj</span><span class="o">.</span><span class="n">config_dict</span><span class="p">())</span>
    <span class="n">backend_config_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
        <span class="s2">&quot;cold_atom_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cold_atom_type</span><span class="p">,</span>
        <span class="s2">&quot;gates&quot;</span><span class="p">:</span> <span class="n">gate_list</span><span class="p">,</span>
        <span class="s2">&quot;max_experiments&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_max_experiments</span><span class="p">,</span>
        <span class="s2">&quot;max_shots&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_max_shots</span><span class="p">,</span>
        <span class="s2">&quot;simulator&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;supported_instructions&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ins_schema_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
        <span class="s2">&quot;num_wires&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_wires</span><span class="p">,</span>
        <span class="s2">&quot;wire_order&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">wire_order</span><span class="p">,</span>
        <span class="s2">&quot;num_species&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_species</span><span class="p">,</span>
        <span class="s2">&quot;operational&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">operational</span><span class="p">,</span>
        <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">BackendConfigSchemaIn</span><span class="p">(</span><span class="o">**</span><span class="n">backend_config_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.get_exp_input_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_exp_input_dict</span><span class="p">(</span><span class="n">json_dict</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Transforms the dictionary into an ExperimentalInputDict object.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>json_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dictionary that should be transformed.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.ExperimentalInputDict" href="../schemes/#src.sqooler.schemes.ExperimentalInputDict">ExperimentalInputDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A ExperimentalInputDict object.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_exp_input_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExperimentalInputDict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transforms the dictionary into an ExperimentalInputDict object.</span>

<span class="sd">    Args:</span>
<span class="sd">        json_dict: The dictionary that should be transformed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A ExperimentalInputDict object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">raw_ins_list</span> <span class="o">=</span> <span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;instructions&quot;</span><span class="p">]</span>
    <span class="n">ins_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">gate_dict_from_list</span><span class="p">(</span><span class="n">instr</span><span class="p">)</span> <span class="k">for</span> <span class="n">instr</span> <span class="ow">in</span> <span class="n">raw_ins_list</span><span class="p">]</span>
    <span class="n">exp_info</span> <span class="o">=</span> <span class="n">ExperimentalInputDict</span><span class="p">(</span>
        <span class="n">instructions</span><span class="o">=</span><span class="n">ins_list</span><span class="p">,</span>
        <span class="n">shots</span><span class="o">=</span><span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;shots&quot;</span><span class="p">],</span>
        <span class="n">wire_order</span><span class="o">=</span><span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;wire_order&quot;</span><span class="p">],</span>
        <span class="n">num_wires</span><span class="o">=</span><span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;num_wires&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">exp_info</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.BaseSpooler.get_private_jwk" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_private_jwk</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get the private JWK for the spooler.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="src.sqooler.security.JWK">JWK</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The private JWK for the spooler.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_private_jwk</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JWK</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the private JWK for the spooler.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The private JWK for the spooler.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">private_jwk_str</span> <span class="o">=</span> <span class="n">config</span><span class="p">(</span><span class="s2">&quot;PRIVATE_JWK_STR&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jwk_from_config_str</span><span class="p">(</span><span class="n">private_jwk_str</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="src.sqooler.spoolers.LabscriptSpooler" class="doc doc-heading">
          <code>LabscriptSpooler</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="src.sqooler.spoolers.BaseSpooler" href="#src.sqooler.spoolers.BaseSpooler">BaseSpooler</a></code></p>

  
      <p>A specialized spooler class that allows us to execute jobs in labscript directly.
The main changes are that we need to add the job in a different way and connect it to a
 <code>runmanager.remoteClient</code>. It adds three new attributes to the <code>BaseSpooler</code> class.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code><span title="src.sqooler.spoolers.LabscriptSpooler.remote_client">remote_client</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The remote client that is used to connect to the labscript server.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.LabscriptSpooler.labscript_params">labscript_params</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The parameters that are used to generate the folder for the shots.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="src.sqooler.spoolers.LabscriptSpooler.run">run</span></code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The run object that is used to execute the labscript file.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LabscriptSpooler</span><span class="p">(</span><span class="n">BaseSpooler</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A specialized spooler class that allows us to execute jobs in labscript directly.</span>
<span class="sd">    The main changes are that we need to add the job in a different way and connect it to a</span>
<span class="sd">     `runmanager.remoteClient`. It adds three new attributes to the `BaseSpooler` class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        remote_client: The remote client that is used to connect to the labscript server.</span>
<span class="sd">        labscript_params: The parameters that are used to generate the folder for the shots.</span>
<span class="sd">        run: The run object that is used to execute the labscript file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ins_schema_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">device_config</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
        <span class="n">n_wires</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">remote_client</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>  <span class="c1"># it would be really nice to fix this type</span>
        <span class="n">labscript_params</span><span class="p">:</span> <span class="n">LabscriptParams</span><span class="p">,</span>
        <span class="n">run</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>  <span class="c1"># it would be really nice to fix this type</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">n_max_shots</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
        <span class="n">cold_atom_type</span><span class="p">:</span> <span class="n">ColdAtomStr</span> <span class="o">=</span> <span class="s2">&quot;spin&quot;</span><span class="p">,</span>
        <span class="n">n_max_experiments</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
        <span class="n">wire_order</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;interleaved&quot;</span><span class="p">,</span>
        <span class="n">num_species</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">operational</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The constructor of the class. The  arguments are the same as for the Spooler</span>
<span class="sd">        class with two additions.</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">ins_schema_dict</span><span class="p">,</span>
            <span class="n">device_config</span><span class="p">,</span>
            <span class="n">n_wires</span><span class="p">,</span>
            <span class="n">description</span><span class="p">,</span>
            <span class="n">n_max_shots</span><span class="p">,</span>
            <span class="n">version</span><span class="p">,</span>
            <span class="n">cold_atom_type</span><span class="p">,</span>
            <span class="n">n_max_experiments</span><span class="p">,</span>
            <span class="n">wire_order</span><span class="p">,</span>
            <span class="n">num_species</span><span class="p">,</span>
            <span class="n">operational</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span> <span class="o">=</span> <span class="n">remote_client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span> <span class="o">=</span> <span class="n">labscript_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run</span> <span class="o">=</span> <span class="n">run</span>

    <span class="k">def</span> <span class="nf">add_job</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">ResultDict</span><span class="p">,</span> <span class="n">StatusMsgDict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The function that translates the json with the instructions into some circuit</span>
<span class="sd">        and executes it. It performs several checks for the job to see if it is properly</span>
<span class="sd">        working. If things are fine the job gets added the list of things that should be</span>
<span class="sd">        executed.</span>

<span class="sd">        Args:</span>
<span class="sd">            json_dict: The job dictonary of all the instructions.</span>
<span class="sd">            job_id: the id of the the job we are treating.</span>

<span class="sd">        Returns:</span>
<span class="sd">            result_dict: The dictionary with the results of the job.</span>
<span class="sd">            status_msg_dict: The status dictionary of the job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span><span class="p">,</span> <span class="n">clean_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prep_job</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>

        <span class="k">for</span> <span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span> <span class="ow">in</span> <span class="n">clean_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># prepare the shots folder</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">reset_shot_output_folder</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_modify_shot_output_folder</span><span class="p">(</span><span class="n">job_id</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">exp_name</span><span class="p">))</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">result_dict</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gen_circuit</span><span class="p">(</span><span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">,</span> <span class="n">job_id</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="n">error_message</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; Failed to generate labscript file.&quot;</span>
                <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;; Failed to generate labscript </span><span class="se">\</span>
<span class="s2">                            file. Error: </span><span class="si">{</span><span class="n">error_message</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>
                <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
        <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; Passed json sanity check; Compilation done. </span><span class="se">\</span>
<span class="s2">                    Shots sent to solver.&quot;</span>
        <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;DONE&quot;</span>
        <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>

    <span class="k">def</span> <span class="nf">_modify_shot_output_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        I am not sure what this function does.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_dir: The new directory under which we save the shots.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to the new directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># we should simplify this at some point</span>
        <span class="n">defaut_shot_folder</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">get_shot_output_folder</span><span class="p">())</span>

        <span class="n">modified_shot_folder</span> <span class="o">=</span> <span class="p">(</span><span class="n">defaut_shot_folder</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">new_dir</span>
        <span class="c1"># suggested better emthod whcih works the same way on all platforms</span>
        <span class="c1"># modified_shot_folder = os.path.join(</span>
        <span class="c1">#    os.path.dirname(defaut_shot_folder), new_dir</span>
        <span class="c1"># )</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">set_shot_output_folder</span><span class="p">(</span><span class="n">modified_shot_folder</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">modified_shot_folder</span>

    <span class="k">def</span> <span class="nf">gen_circuit</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">exp_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="n">ExperimentalInputDict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExperimentDict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is the main script that generates the labscript file.</span>

<span class="sd">        Args:</span>
<span class="sd">            exp_name: The name of the experiment</span>
<span class="sd">            json_dict: The dictionary that contains the instructions for the circuit.</span>
<span class="sd">            job_id: The user id of the user that is running the experiment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to the labscript file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># parameters for the function</span>
        <span class="n">exp_script_folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span><span class="o">.</span><span class="n">exp_script_folder</span>

        <span class="c1"># local files</span>
        <span class="n">header_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exp_script_folder</span><span class="si">}</span><span class="s2">/header.py&quot;</span>
        <span class="n">remote_experiments_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exp_script_folder</span><span class="si">}</span><span class="s2">/remote_experiments&quot;</span>
        <span class="c1"># make sure that the folder exists</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">remote_experiments_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The path </span><span class="si">{</span><span class="n">remote_experiments_path</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span>
            <span class="p">)</span>

        <span class="n">n_shots</span> <span class="o">=</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">shots</span>
        <span class="n">ins_list</span> <span class="o">=</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">instructions</span>

        <span class="n">globals_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;job_id&quot;</span><span class="p">:</span> <span class="s2">&quot;guest&quot;</span><span class="p">,</span>
            <span class="s2">&quot;shots&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">globals_dict</span><span class="p">[</span><span class="s2">&quot;shots&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n_shots</span><span class="p">))</span>
        <span class="n">globals_dict</span><span class="p">[</span><span class="s2">&quot;job_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">set_globals</span><span class="p">(</span><span class="n">globals_dict</span><span class="p">)</span>
        <span class="n">script_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;experiment_</span><span class="si">{</span><span class="n">globals_dict</span><span class="p">[</span><span class="s1">&#39;job_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.py&quot;</span>
        <span class="n">exp_script</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">remote_experiments_path</span><span class="p">,</span> <span class="n">script_name</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># this is the top part of the script it allows us to import the</span>
        <span class="c1"># typical functions that we require for each single sequence</span>
        <span class="c1"># first have a look if the file exists</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">header_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Header file not found at </span><span class="si">{</span><span class="n">header_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">header_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">header_file</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">header_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="c1"># add a line break to the code</span>
        <span class="n">code</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">exp_script</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">script_file</span><span class="p">:</span>
            <span class="n">script_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">ins_list</span><span class="p">:</span>
            <span class="c1"># we can directly use the function name as we have already verified</span>
            <span class="c1"># that the function exists in the `add_job` function</span>
            <span class="n">code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Experiment.</span><span class="si">{</span><span class="n">inst</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">inst</span><span class="o">.</span><span class="n">wires</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">inst</span><span class="o">.</span><span class="n">params</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="c1"># we should add proper error handling here</span>
            <span class="c1"># pylint: disable=bare-except</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">exp_script</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">script_file</span><span class="p">:</span>
                    <span class="n">script_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something wrong. Does file path exists?&quot;</span><span class="p">)</span>

        <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;Experiment.final_action()&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;stop(Experiment.t+0.1)&quot;</span>
        <span class="c1"># pylint: disable=bare-except</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">exp_script</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">script_file</span><span class="p">:</span>
                <span class="n">script_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something wrong. Does file path exists?&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">set_labscript_file</span><span class="p">(</span>
            <span class="n">exp_script</span>
        <span class="p">)</span>  <span class="c1"># CAUTION !! This command only selects the file. It does not generate it!</span>

        <span class="c1"># be careful. This is not a blocking command</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">engage</span><span class="p">()</span>

        <span class="c1"># now that we have engaged the calculation we need to wait for the</span>
        <span class="c1"># calculation to be done</span>

        <span class="c1"># we need to get the current shot output folder</span>
        <span class="n">current_shot_folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">get_shot_output_folder</span><span class="p">()</span>
        <span class="c1"># we need to get the list of files in the folder</span>
        <span class="n">hdf5_files</span> <span class="o">=</span> <span class="n">get_file_queue</span><span class="p">(</span><span class="n">current_shot_folder</span><span class="p">)</span>

        <span class="c1"># we need to wait until we have the right number of files</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">hdf5_files</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">n_shots</span><span class="p">:</span>
            <span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span><span class="o">.</span><span class="n">t_wait</span><span class="p">)</span>
            <span class="n">hdf5_files</span> <span class="o">=</span> <span class="n">get_file_queue</span><span class="p">(</span><span class="n">current_shot_folder</span><span class="p">)</span>

        <span class="n">shots_array</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># once the files are there we can read them</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">hdf5_files</span><span class="p">:</span>
            <span class="n">this_run</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">current_shot_folder</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">file</span><span class="p">)</span>
            <span class="n">got_nat</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">n_tries</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># sometimes the file is not ready yet. We need to wait a bit</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="n">got_nat</span> <span class="ow">and</span> <span class="n">n_tries</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
                <span class="c1"># the exception is raised if the file is not ready yet</span>
                <span class="c1"># it is broadly defined within labscript so we cannot do anything about</span>
                <span class="c1"># it here.</span>
                <span class="c1"># pylint: disable=W0718</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># append the result to the array</span>
                    <span class="n">shots_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_run</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="s2">&quot;/measure&quot;</span><span class="p">,</span> <span class="s2">&quot;nat&quot;</span><span class="p">))</span>
                    <span class="n">got_nat</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
                    <span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span><span class="o">.</span><span class="n">t_wait</span><span class="p">)</span>
                    <span class="n">n_tries</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">exp_sub_dict</span> <span class="o">=</span> <span class="n">create_memory_data</span><span class="p">(</span><span class="n">shots_array</span><span class="p">,</span> <span class="n">exp_name</span><span class="p">,</span> <span class="n">n_shots</span><span class="p">,</span> <span class="n">ins_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">exp_sub_dict</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.LabscriptSpooler.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">ins_schema_dict</span><span class="p">,</span> <span class="n">device_config</span><span class="p">,</span> <span class="n">n_wires</span><span class="p">,</span> <span class="n">remote_client</span><span class="p">,</span> <span class="n">labscript_params</span><span class="p">,</span> <span class="n">run</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">n_max_shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="n">cold_atom_type</span><span class="o">=</span><span class="s1">&#39;spin&#39;</span><span class="p">,</span> <span class="n">n_max_experiments</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">wire_order</span><span class="o">=</span><span class="s1">&#39;interleaved&#39;</span><span class="p">,</span> <span class="n">num_species</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">operational</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The constructor of the class. The  arguments are the same as for the Spooler
class with two additions.</p>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ins_schema_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">device_config</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
    <span class="n">n_wires</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">remote_client</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>  <span class="c1"># it would be really nice to fix this type</span>
    <span class="n">labscript_params</span><span class="p">:</span> <span class="n">LabscriptParams</span><span class="p">,</span>
    <span class="n">run</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>  <span class="c1"># it would be really nice to fix this type</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">n_max_shots</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
    <span class="n">cold_atom_type</span><span class="p">:</span> <span class="n">ColdAtomStr</span> <span class="o">=</span> <span class="s2">&quot;spin&quot;</span><span class="p">,</span>
    <span class="n">n_max_experiments</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
    <span class="n">wire_order</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;interleaved&quot;</span><span class="p">,</span>
    <span class="n">num_species</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">operational</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The constructor of the class. The  arguments are the same as for the Spooler</span>
<span class="sd">    class with two additions.</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">ins_schema_dict</span><span class="p">,</span>
        <span class="n">device_config</span><span class="p">,</span>
        <span class="n">n_wires</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">n_max_shots</span><span class="p">,</span>
        <span class="n">version</span><span class="p">,</span>
        <span class="n">cold_atom_type</span><span class="p">,</span>
        <span class="n">n_max_experiments</span><span class="p">,</span>
        <span class="n">wire_order</span><span class="p">,</span>
        <span class="n">num_species</span><span class="p">,</span>
        <span class="n">operational</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span> <span class="o">=</span> <span class="n">remote_client</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span> <span class="o">=</span> <span class="n">labscript_params</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run</span> <span class="o">=</span> <span class="n">run</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.LabscriptSpooler.add_job" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_job</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The function that translates the json with the instructions into some circuit
and executes it. It performs several checks for the job to see if it is properly
working. If things are fine the job gets added the list of things that should be
executed.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>json_dict</code></td>
          <td>
                <code>dict[str, dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The job dictonary of all the instructions.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the id of the the job we are treating.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>result_dict</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.ResultDict" href="../schemes/#src.sqooler.schemes.ResultDict">ResultDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dictionary with the results of the job.</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>status_msg_dict</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.StatusMsgDict" href="../schemes/#src.sqooler.schemes.StatusMsgDict">StatusMsgDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The status dictionary of the job.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_job</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">ResultDict</span><span class="p">,</span> <span class="n">StatusMsgDict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function that translates the json with the instructions into some circuit</span>
<span class="sd">    and executes it. It performs several checks for the job to see if it is properly</span>
<span class="sd">    working. If things are fine the job gets added the list of things that should be</span>
<span class="sd">    executed.</span>

<span class="sd">    Args:</span>
<span class="sd">        json_dict: The job dictonary of all the instructions.</span>
<span class="sd">        job_id: the id of the the job we are treating.</span>

<span class="sd">    Returns:</span>
<span class="sd">        result_dict: The dictionary with the results of the job.</span>
<span class="sd">        status_msg_dict: The status dictionary of the job.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span><span class="p">,</span> <span class="n">clean_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prep_job</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>

    <span class="k">for</span> <span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span> <span class="ow">in</span> <span class="n">clean_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># prepare the shots folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">reset_shot_output_folder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modify_shot_output_folder</span><span class="p">(</span><span class="n">job_id</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">exp_name</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">result_dict</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gen_circuit</span><span class="p">(</span><span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">,</span> <span class="n">job_id</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; Failed to generate labscript file.&quot;</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;; Failed to generate labscript </span><span class="se">\</span>
<span class="s2">                        file. Error: </span><span class="si">{</span><span class="n">error_message</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>
            <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
    <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; Passed json sanity check; Compilation done. </span><span class="se">\</span>
<span class="s2">                Shots sent to solver.&quot;</span>
    <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;DONE&quot;</span>
    <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.LabscriptSpooler.gen_circuit" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_circuit</span><span class="p">(</span><span class="n">exp_name</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>This is the main script that generates the labscript file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>exp_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the experiment</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>json_dict</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.ExperimentalInputDict" href="../schemes/#src.sqooler.schemes.ExperimentalInputDict">ExperimentalInputDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dictionary that contains the instructions for the circuit.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The user id of the user that is running the experiment.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.ExperimentDict" href="../schemes/#src.sqooler.schemes.ExperimentDict">ExperimentDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The path to the labscript file.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">gen_circuit</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">exp_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="n">ExperimentalInputDict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExperimentDict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the main script that generates the labscript file.</span>

<span class="sd">    Args:</span>
<span class="sd">        exp_name: The name of the experiment</span>
<span class="sd">        json_dict: The dictionary that contains the instructions for the circuit.</span>
<span class="sd">        job_id: The user id of the user that is running the experiment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The path to the labscript file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># parameters for the function</span>
    <span class="n">exp_script_folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span><span class="o">.</span><span class="n">exp_script_folder</span>

    <span class="c1"># local files</span>
    <span class="n">header_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exp_script_folder</span><span class="si">}</span><span class="s2">/header.py&quot;</span>
    <span class="n">remote_experiments_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exp_script_folder</span><span class="si">}</span><span class="s2">/remote_experiments&quot;</span>
    <span class="c1"># make sure that the folder exists</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">remote_experiments_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The path </span><span class="si">{</span><span class="n">remote_experiments_path</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span>
        <span class="p">)</span>

    <span class="n">n_shots</span> <span class="o">=</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">shots</span>
    <span class="n">ins_list</span> <span class="o">=</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">instructions</span>

    <span class="n">globals_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;job_id&quot;</span><span class="p">:</span> <span class="s2">&quot;guest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;shots&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">globals_dict</span><span class="p">[</span><span class="s2">&quot;shots&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n_shots</span><span class="p">))</span>
    <span class="n">globals_dict</span><span class="p">[</span><span class="s2">&quot;job_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">set_globals</span><span class="p">(</span><span class="n">globals_dict</span><span class="p">)</span>
    <span class="n">script_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;experiment_</span><span class="si">{</span><span class="n">globals_dict</span><span class="p">[</span><span class="s1">&#39;job_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.py&quot;</span>
    <span class="n">exp_script</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">remote_experiments_path</span><span class="p">,</span> <span class="n">script_name</span><span class="p">)</span>
    <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># this is the top part of the script it allows us to import the</span>
    <span class="c1"># typical functions that we require for each single sequence</span>
    <span class="c1"># first have a look if the file exists</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">header_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Header file not found at </span><span class="si">{</span><span class="n">header_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">header_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">header_file</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">header_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># add a line break to the code</span>
    <span class="n">code</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">exp_script</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">script_file</span><span class="p">:</span>
        <span class="n">script_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">ins_list</span><span class="p">:</span>
        <span class="c1"># we can directly use the function name as we have already verified</span>
        <span class="c1"># that the function exists in the `add_job` function</span>
        <span class="n">code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Experiment.</span><span class="si">{</span><span class="n">inst</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">inst</span><span class="o">.</span><span class="n">wires</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">inst</span><span class="o">.</span><span class="n">params</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="c1"># we should add proper error handling here</span>
        <span class="c1"># pylint: disable=bare-except</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">exp_script</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">script_file</span><span class="p">:</span>
                <span class="n">script_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something wrong. Does file path exists?&quot;</span><span class="p">)</span>

    <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;Experiment.final_action()&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;stop(Experiment.t+0.1)&quot;</span>
    <span class="c1"># pylint: disable=bare-except</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">exp_script</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">script_file</span><span class="p">:</span>
            <span class="n">script_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something wrong. Does file path exists?&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">set_labscript_file</span><span class="p">(</span>
        <span class="n">exp_script</span>
    <span class="p">)</span>  <span class="c1"># CAUTION !! This command only selects the file. It does not generate it!</span>

    <span class="c1"># be careful. This is not a blocking command</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">engage</span><span class="p">()</span>

    <span class="c1"># now that we have engaged the calculation we need to wait for the</span>
    <span class="c1"># calculation to be done</span>

    <span class="c1"># we need to get the current shot output folder</span>
    <span class="n">current_shot_folder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_client</span><span class="o">.</span><span class="n">get_shot_output_folder</span><span class="p">()</span>
    <span class="c1"># we need to get the list of files in the folder</span>
    <span class="n">hdf5_files</span> <span class="o">=</span> <span class="n">get_file_queue</span><span class="p">(</span><span class="n">current_shot_folder</span><span class="p">)</span>

    <span class="c1"># we need to wait until we have the right number of files</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">hdf5_files</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">n_shots</span><span class="p">:</span>
        <span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span><span class="o">.</span><span class="n">t_wait</span><span class="p">)</span>
        <span class="n">hdf5_files</span> <span class="o">=</span> <span class="n">get_file_queue</span><span class="p">(</span><span class="n">current_shot_folder</span><span class="p">)</span>

    <span class="n">shots_array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># once the files are there we can read them</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">hdf5_files</span><span class="p">:</span>
        <span class="n">this_run</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">current_shot_folder</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">file</span><span class="p">)</span>
        <span class="n">got_nat</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">n_tries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># sometimes the file is not ready yet. We need to wait a bit</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">got_nat</span> <span class="ow">and</span> <span class="n">n_tries</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
            <span class="c1"># the exception is raised if the file is not ready yet</span>
            <span class="c1"># it is broadly defined within labscript so we cannot do anything about</span>
            <span class="c1"># it here.</span>
            <span class="c1"># pylint: disable=W0718</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># append the result to the array</span>
                <span class="n">shots_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_run</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="s2">&quot;/measure&quot;</span><span class="p">,</span> <span class="s2">&quot;nat&quot;</span><span class="p">))</span>
                <span class="n">got_nat</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
                <span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labscript_params</span><span class="o">.</span><span class="n">t_wait</span><span class="p">)</span>
                <span class="n">n_tries</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">exp_sub_dict</span> <span class="o">=</span> <span class="n">create_memory_data</span><span class="p">(</span><span class="n">shots_array</span><span class="p">,</span> <span class="n">exp_name</span><span class="p">,</span> <span class="n">n_shots</span><span class="p">,</span> <span class="n">ins_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">exp_sub_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="src.sqooler.spoolers.Spooler" class="doc doc-heading">
          <code>Spooler</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="src.sqooler.spoolers.BaseSpooler" href="#src.sqooler.spoolers.BaseSpooler">BaseSpooler</a></code></p>

  
      <p>The class for the spooler as it can be used for simulators.</p>

            <details class="quote">
              <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Spooler</span><span class="p">(</span><span class="n">BaseSpooler</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The class for the spooler as it can be used for simulators.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gen_circuit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExperimentalInputDict</span><span class="p">],</span> <span class="n">ExperimentDict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The function that generates the circuit.</span>
<span class="sd">        It can be basically anything that allows the execution of the circuit.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The function that generates the circuit.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: if the gen_circuit is not a callable function</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_gen_circuit&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;gen_circuit must be set&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_circuit</span>

    <span class="nd">@gen_circuit</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">gen_circuit</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExperimentalInputDict</span><span class="p">],</span> <span class="n">ExperimentDict</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The setter for the gen_circuit function. The first argument is the name of the</span>
<span class="sd">        experiment and the second argument is the dictionary with the instructions.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The function that generates the circuit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>  <span class="c1"># Check if the provided value is a callable (function)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_circuit</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;gen_circuit must be a callable function&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_job</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">ResultDict</span><span class="p">,</span> <span class="n">StatusMsgDict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The function that translates the json with the instructions into some circuit and executes it.</span>
<span class="sd">        It performs several checks for the job to see if it is properly working.</span>
<span class="sd">        If things are fine the job gets added the list of things that should be executed.</span>

<span class="sd">        Args:</span>
<span class="sd">            json_dict: The job dictonary of all the instructions.</span>
<span class="sd">            job_id: the id of the the job we are treating.</span>

<span class="sd">        Returns:</span>
<span class="sd">            result_dict: The dictionary with the results of the job.</span>
<span class="sd">            status_msg_dict: The status dictionary of the job.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span><span class="p">,</span> <span class="n">clean_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prep_job</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
        <span class="c1"># now we can generate the circuit for each experiment</span>
        <span class="k">for</span> <span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span> <span class="ow">in</span> <span class="n">clean_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result_dict</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gen_circuit</span><span class="p">(</span><span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">))</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Experiment </span><span class="si">%s</span><span class="s2"> done.&quot;</span><span class="p">,</span> <span class="n">exp_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span> <span class="o">+=</span> <span class="s2">&quot;; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Error in gen_circuit.&quot;</span><span class="p">,</span>
                    <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span><span class="p">},</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
        <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; Passed json sanity check; Compilation done. </span><span class="se">\</span>
<span class="s2">                    Shots sent to solver.&quot;</span>
        <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;DONE&quot;</span>
        <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="src.sqooler.spoolers.Spooler.gen_circuit" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_circuit</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExperimentalInputDict</span><span class="p">],</span> <span class="n">ExperimentDict</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>The function that generates the circuit.
It can be basically anything that allows the execution of the circuit.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="collections.abc.Callable">Callable</span>[[str, <a class="autorefs autorefs-internal" title="src.sqooler.schemes.ExperimentalInputDict" href="../schemes/#src.sqooler.schemes.ExperimentalInputDict">ExperimentalInputDict</a>], <a class="autorefs autorefs-internal" title="src.sqooler.schemes.ExperimentDict" href="../schemes/#src.sqooler.schemes.ExperimentDict">ExperimentDict</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The function that generates the circuit.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the gen_circuit is not a callable function</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="src.sqooler.spoolers.Spooler.add_job" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_job</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The function that translates the json with the instructions into some circuit and executes it.
It performs several checks for the job to see if it is properly working.
If things are fine the job gets added the list of things that should be executed.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>json_dict</code></td>
          <td>
                <code>dict[str, dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The job dictonary of all the instructions.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the id of the the job we are treating.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>result_dict</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.ResultDict" href="../schemes/#src.sqooler.schemes.ResultDict">ResultDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dictionary with the results of the job.</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>status_msg_dict</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.StatusMsgDict" href="../schemes/#src.sqooler.schemes.StatusMsgDict">StatusMsgDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The status dictionary of the job.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_job</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">ResultDict</span><span class="p">,</span> <span class="n">StatusMsgDict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function that translates the json with the instructions into some circuit and executes it.</span>
<span class="sd">    It performs several checks for the job to see if it is properly working.</span>
<span class="sd">    If things are fine the job gets added the list of things that should be executed.</span>

<span class="sd">    Args:</span>
<span class="sd">        json_dict: The job dictonary of all the instructions.</span>
<span class="sd">        job_id: the id of the the job we are treating.</span>

<span class="sd">    Returns:</span>
<span class="sd">        result_dict: The dictionary with the results of the job.</span>
<span class="sd">        status_msg_dict: The status dictionary of the job.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span><span class="p">,</span> <span class="n">clean_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prep_job</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="n">job_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
    <span class="c1"># now we can generate the circuit for each experiment</span>
    <span class="k">for</span> <span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span> <span class="ow">in</span> <span class="n">clean_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result_dict</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gen_circuit</span><span class="p">(</span><span class="n">exp_name</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">))</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Experiment </span><span class="si">%s</span><span class="s2"> done.&quot;</span><span class="p">,</span> <span class="n">exp_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span> <span class="o">+=</span> <span class="s2">&quot;; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Error in gen_circuit.&quot;</span><span class="p">,</span>
                <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">error_message</span><span class="p">},</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
    <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">detail</span> <span class="o">+=</span> <span class="s2">&quot;; Passed json sanity check; Compilation done. </span><span class="se">\</span>
<span class="s2">                Shots sent to solver.&quot;</span>
    <span class="n">status_msg_dict</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;DONE&quot;</span>
    <span class="k">return</span> <span class="n">result_dict</span><span class="p">,</span> <span class="n">status_msg_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>



<div class="doc doc-object doc-function">



<h2 id="src.sqooler.spoolers.create_memory_data" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">create_memory_data</span><span class="p">(</span><span class="n">shots_array</span><span class="p">,</span> <span class="n">exp_name</span><span class="p">,</span> <span class="n">n_shots</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>The function to create memory key in results dictionary
with proprer formatting.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>shots_array</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The array with the shots.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>exp_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the experiment.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>n_shots</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of shots.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>instructions</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[list[<a class="autorefs autorefs-internal" title="src.sqooler.schemes.GateDict" href="../schemes/#src.sqooler.schemes.GateDict">GateDict</a>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The list of instructions that were executed</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.ExperimentDict" href="../schemes/#src.sqooler.schemes.ExperimentDict">ExperimentDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The ExperimentDict object describing the results.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_memory_data</span><span class="p">(</span>
    <span class="n">shots_array</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
    <span class="n">exp_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">n_shots</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">instructions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">GateDict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExperimentDict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function to create memory key in results dictionary</span>
<span class="sd">    with proprer formatting.</span>

<span class="sd">    Args:</span>
<span class="sd">        shots_array: The array with the shots.</span>
<span class="sd">        exp_name: The name of the experiment.</span>
<span class="sd">        n_shots: The number of shots.</span>
<span class="sd">        instructions: The list of instructions that were executed</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ExperimentDict object describing the results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">exp_sub_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;experiment_0&quot;</span><span class="p">,</span> <span class="s2">&quot;extra metadata&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">},</span>
        <span class="s2">&quot;shots&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">exp_sub_dict</span><span class="p">[</span><span class="s2">&quot;header&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span>
    <span class="n">exp_sub_dict</span><span class="p">[</span><span class="s2">&quot;shots&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">n_shots</span>
    <span class="n">memory_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">shot</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">shot</span> <span class="ow">in</span> <span class="n">shots_array</span>
    <span class="p">]</span>
    <span class="n">exp_sub_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;memory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">memory_list</span>
    <span class="k">if</span> <span class="n">instructions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">exp_sub_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;instructions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">instructions</span>
    <span class="k">return</span> <span class="n">ExperimentDict</span><span class="p">(</span><span class="o">**</span><span class="n">exp_sub_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="src.sqooler.spoolers.gate_dict_from_list" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gate_dict_from_list</span><span class="p">(</span><span class="n">inst_list</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Transforms a list into an appropiate dictionnary for instructions. The list
is assumed to be in the format [name, wires, params].</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>inst_list</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The list that should be transformed.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.sqooler.schemes.GateDict" href="../schemes/#src.sqooler.schemes.GateDict">GateDict</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A GateDict object.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">gate_dict_from_list</span><span class="p">(</span><span class="n">inst_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GateDict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transforms a list into an appropiate dictionnary for instructions. The list</span>
<span class="sd">    is assumed to be in the format [name, wires, params].</span>

<span class="sd">    Args:</span>
<span class="sd">        inst_list: The list that should be transformed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A GateDict object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gate_draft</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">inst_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;wires&quot;</span><span class="p">:</span> <span class="n">inst_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">inst_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
    <span class="k">return</span> <span class="n">GateDict</span><span class="p">(</span><span class="o">**</span><span class="n">gate_draft</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="src.sqooler.spoolers.get_file_queue" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_file_queue</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>A function that returns the list of files in the directory.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dir_path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The path to the directory.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of files in the directory. It excludes directories.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the path is not a directory.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/sqooler/spoolers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_file_queue</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function that returns the list of files in the directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir_path: The path to the directory.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of files in the directory. It excludes directories.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the path is not a directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># make sure that the path is an existing directory</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The path </span><span class="si">{</span><span class="n">dir_path</span><span class="si">}</span><span class="s2"> is not a directory.&quot;</span><span class="p">)</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">file</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">files</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>







  
  






  <h2 id="__comments">Comments</h2>
  <script src="https://giscus.app/client.js"
        data-repo="alqor-ug/sqooler"
        data-repo-id="R_kgDOIsFD9A"
        data-category="Announcements"
        data-category-id="DIC_kwDOIsFD9M4CTajH"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 


    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../utils/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Utils">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Utils
              </div>
            </div>
          </a>
        
        
          
          <a href="../security/" class="md-footer__link md-footer__link--next" aria-label="Next: Security">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Security
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.footer", "toc.follow", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>